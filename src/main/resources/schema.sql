CREATE TABLE IF NOT EXISTS requests (
id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
description VARCHAR(700),
requestor INTEGER,
created TIMESTAMP
);

CREATE TABLE IF NOT EXISTS users (
  id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(255),
  email VARCHAR(512) UNIQUE
);

CREATE TABLE IF NOT EXISTS items (
  id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(255),
  description VARCHAR(512),
  available BOOLEAN,
  owner INTEGER REFERENCES users(id),
  request_id INTEGER REFERENCES requests(id)
);

CREATE TABLE IF NOT EXISTS bookings (
id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
start_time TIMESTAMP,
end_time TIMESTAMP,
item INTEGER REFERENCES items(id),
booker INTEGER REFERENCES users(id),
status VARCHAR(50)
);

CREATE TABLE IF NOT EXISTS comments (
id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
text VARCHAR(200),
item INTEGER REFERENCES items(id),
author INTEGER REFERENCES users(id),
created TIMESTAMP
);